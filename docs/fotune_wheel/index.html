<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Demo Shop with Fortune Wheel</title>
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    /* Hover-эффект для карточек */
    .product-card:hover {
      transform: translateY(-4px);
      transition: transform 0.3s ease;
    }

    /* Баннер фон */
    .hero-banner {
      background: url("https://via.placeholder.com/1200x400/ffecd2/8360c3") center/cover no-repeat;
      min-height: 240px;
    }

    /* Колесо фортуны - плавное появление/исчезание */
    #wheelModal {
      transition: opacity 0.3s ease;
    }

    /* Точечный указатель */
    .wheel-pointer {
      position: absolute;
      width: 0;
      height: 0;
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 30px solid #e11d48; /* цвет указателя */
      top: -30px;
      left: 50%;
      transform: translateX(-50%);
    }

    /* Анимация карточек */
    .fade-in {
      animation: fadein 0.7s ease forwards;
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(10px);}
      to { opacity: 1; transform: translateY(0);}
    }
  </style>
</head>
<body class="bg-gray-100">

<!-- Header -->
<header class="bg-white shadow p-4 sticky top-0 z-20">
  <div class="max-w-6xl mx-auto flex items-center justify-between">
    <h1 class="text-xl font-semibold text-pink-600">
      <a href="#" class="hover:text-pink-700 transition-colors">Demo Shop</a>
    </h1>
    <nav>
      <ul class="flex space-x-4 text-gray-700">
        <li><a href="#" class="hover:underline">Главная</a></li>
        <li><a href="#" class="hover:underline">Каталог</a></li>
        <li><a href="#" class="hover:underline">Контакты</a></li>
      </ul>
    </nav>
  </div>
</header>

<!-- Hero Banner -->
<section class="hero-banner flex items-center justify-center text-white relative">
  <div class="bg-black bg-opacity-40 w-full h-full absolute top-0 left-0"></div>
  <div class="max-w-6xl mx-auto px-4 py-16 relative z-10 text-center">
    <h2 class="text-3xl md:text-4xl font-bold mb-4">Скидки и крутые призы</h2>
    <p class="text-base md:text-lg">Испытай удачу: крути колесо фортуны и получай дополнительные бонусы!</p>
  </div>
</section>

<!-- Products Grid -->
<main class="max-w-6xl mx-auto py-10 px-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
  <!-- Товар 1 -->
  <div class="product-card bg-white p-4 shadow rounded fade-in">
    <img src="https://via.placeholder.com/300x200" alt="Product 1" class="w-full mb-2 rounded">
    <h2 class="font-semibold text-lg">Товар #1</h2>
    <p class="text-sm text-gray-600">Описание товара</p>
    <p class="mt-2 font-bold text-pink-500">1 999 ₽</p>
    <button class="mt-2 bg-pink-600 hover:bg-pink-700 text-white py-2 px-4 rounded">В корзину</button>
  </div>
  <!-- Товар 2 -->
  <div class="product-card bg-white p-4 shadow rounded fade-in">
    <img src="https://via.placeholder.com/300x200" alt="Product 2" class="w-full mb-2 rounded">
    <h2 class="font-semibold text-lg">Товар #2</h2>
    <p class="text-sm text-gray-600">Описание товара</p>
    <p class="mt-2 font-bold text-pink-500">2 499 ₽</p>
    <button class="mt-2 bg-pink-600 hover:bg-pink-700 text-white py-2 px-4 rounded">В корзину</button>
  </div>
  <!-- Товар 3 -->
  <div class="product-card bg-white p-4 shadow rounded fade-in">
    <img src="https://via.placeholder.com/300x200" alt="Product 3" class="w-full mb-2 rounded">
    <h2 class="font-semibold text-lg">Товар #3</h2>
    <p class="text-sm text-gray-600">Описание товара</p>
    <p class="mt-2 font-bold text-pink-500">3 199 ₽</p>
    <button class="mt-2 bg-pink-600 hover:bg-pink-700 text-white py-2 px-4 rounded">В корзину</button>
  </div>
  <!-- Товар 4 -->
  <div class="product-card bg-white p-4 shadow rounded fade-in">
    <img src="https://via.placeholder.com/300x200" alt="Product 4" class="w-full mb-2 rounded">
    <h2 class="font-semibold text-lg">Товар #4</h2>
    <p class="text-sm text-gray-600">Описание товара</p>
    <p class="mt-2 font-bold text-pink-500">4 599 ₽</p>
    <button class="mt-2 bg-pink-600 hover:bg-pink-700 text-white py-2 px-4 rounded">В корзину</button>
  </div>
</main>

<!-- Fortune Wheel Popup -->
<div id="wheelModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden">
  <div class="bg-white p-6 rounded shadow relative w-96">
    <h3 class="text-xl font-bold mb-2 text-center text-pink-600">Испытай удачу!</h3>
    <!-- Колесо -->
    <div class="relative mx-auto mt-2">
      <canvas id="wheelCanvas" width="300" height="300"></canvas>
      <!-- Добавляем указатель сверху -->
      <div class="wheel-pointer"></div>
    </div>
    <button id="spinBtn" class="mt-4 bg-pink-600 hover:bg-pink-700 text-white py-2 px-4 rounded block mx-auto">Крутить колесо</button>
    <!-- Кнопка закрытия -->
    <button id="closeWheel" class="absolute top-2 right-2 text-gray-500 hover:text-gray-900 text-2xl">&times;</button>
  </div>
</div>

<!-- Footer -->
<footer class="bg-white shadow p-4 mt-8">
  <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between text-sm text-gray-600">
    <p>&copy; 2023 Demo Shop</p>
    <div class="mt-2 md:mt-0">
      <a href="#" class="hover:underline mx-2">Политика конфиденциальности</a>|
      <a href="#" class="hover:underline mx-2">Условия использования</a>
    </div>
  </div>
</footer>

<script>
  // Открываем колесо при загрузке (можно сделать по кнопке, если нужно)
  window.addEventListener('load', () => {
    document.getElementById('wheelModal').classList.remove('hidden');
  });

  // Кнопка закрытия
  document.getElementById('closeWheel').addEventListener('click', () => {
    document.getElementById('wheelModal').classList.add('hidden');
  });

  // Настройка колеса
  const canvas = document.getElementById('wheelCanvas');
  const ctx = canvas.getContext('2d');
  const segments = ['-10%', '-20%', '-30%', 'Бесплатная доставка', '-50%', 'Попробуй еще!'];
  let currentAngle = 0;

  // Рисуем сегменты
  function drawWheel(angleDeg) {
    const arc = 2 * Math.PI / segments.length;
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    for (let i = 0; i < segments.length; i++) {
      const startAngle = (angleDeg * Math.PI/180) + i * arc;
      ctx.beginPath();
      ctx.fillStyle = i % 2 === 0 ? '#FDE68A' : '#FCD34D'; // вариация желтых оттенков
      ctx.moveTo(canvas.width / 2, canvas.height / 2);
      ctx.arc(canvas.width / 2, canvas.height / 2, 150, startAngle, startAngle + arc);
      ctx.fill();

      // текст в сегменте
      ctx.save();
      ctx.fillStyle = '#333';
      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.rotate(startAngle + arc / 2);
      ctx.font = 'bold 14px sans-serif';
      ctx.fillText(segments[i], 60, 5);
      ctx.restore();
    }
  }

  drawWheel(currentAngle);

  // Спин
  document.getElementById('spinBtn').addEventListener('click', () => {
    const randomSpin = 360 * 4 + Math.floor(Math.random() * 360);
    const spinDuration = 3000; // 3 секунды
    const startAngle = currentAngle;
    const startTime = performance.now();

    function rotate(timestamp) {
      let elapsed = timestamp - startTime;
      if (elapsed < spinDuration) {
        const progress = elapsed / spinDuration;
        currentAngle = startAngle + (randomSpin - startAngle) * easeOutQuad(progress);
        drawWheel(currentAngle);
        requestAnimationFrame(rotate);
      } else {
        currentAngle = randomSpin;
        drawWheel(currentAngle);
        alert('Поздравляем! Ваша скидка: ' + chooseSegment());
      }
    }

    requestAnimationFrame(rotate);
  });

  function chooseSegment() {
    const arcSize = 360 / segments.length;
    let normalizedAngle = currentAngle % 360;
    if (normalizedAngle < 0) normalizedAngle += 360;
    let index = Math.floor((360 - normalizedAngle) / arcSize) % segments.length;
    return segments[index];
  }

  function easeOutQuad(t) {
    return t * (2 - t);
  }
</script>
</body>
</html>
